generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Tickets {
    id               String    @id @default(auto()) @map("_id") @db.ObjectId
    timestamp        DateTime  @default(now())
    paymentID        String    
    paymentSecret    String   
    paymentStatus    String    
    paymentAmount    Int       
    paymentCurrency  String    
    buyerName        String    
    ticketData       String
    buyerEmail       String    
}

model Users {
    id          String     @id @default(auto()) @map("_id") @db.ObjectId
    email       String     @unique
    username    String     
    credentials Credential[]
    password    String
    createdAt   DateTime   @default(now())
    updatedAt   DateTime   @updatedAt
}

model Credential {
    id         String      @id @default(auto()) @map("_id") @db.ObjectId
    user       Users       @relation(fields: [userId], references: [id])
    userId     String      @db.ObjectId
    name       String?
    externalId String
    publicKey  Bytes       @unique
    signCount  Int         @default(0)
    createdAt  DateTime    @default(now())
    updatedAt  DateTime    @updatedAt
    @@index([externalId])
}

model Challenge {
    id         String      @id @default(auto()) @map("_id") @db.ObjectId
    userID     String      @db.ObjectId
    value      String
}